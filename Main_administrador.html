<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrativo - Sistema Cafeter√≠a</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
        }

        body {
            background: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .sidebar {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            min-height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            width: 250px;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .sidebar.collapsed {
            width: 70px;
        }

        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h4 {
            color: white;
            margin: 0;
            font-weight: 700;
        }

        .sidebar-header.collapsed h4 {
            display: none;
        }

        .nav-menu {
            padding: 20px 0;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.8);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .nav-link:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            border-left-color: white;
        }

        .nav-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.2);
            border-left-color: white;
        }

        .nav-link i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .sidebar.collapsed .nav-link span {
            display: none;
        }

        .main-content {
            margin-left: 250px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 70px;
        }

        .top-bar {
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .toggle-sidebar {
            background: none;
            border: none;
            font-size: 1.5em;
            color: var(--primary-color);
            cursor: pointer;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid var(--primary-color);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: var(--primary-color);
            font-size: 2.5em;
            margin: 0;
            font-weight: 700;
        }

        .stat-card p {
            color: #666;
            margin: 5px 0 0 0;
            font-size: 1.1em;
        }

        .stat-icon {
            font-size: 3em;
            color: var(--primary-color);
            opacity: 0.3;
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .content-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .section-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .section-header h5 {
            margin: 0;
            font-weight: 600;
        }

        .btn-add {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .btn-add:hover {
            background: rgba(255, 255, 255, 0.3);
            color: white;
        }

        .table-responsive {
            padding: 20px;
        }

        .table th {
            background: #f8f9fa;
            border: none;
            font-weight: 600;
            color: #333;
        }

        .table td {
            vertical-align: middle;
            border: none;
            border-bottom: 1px solid #eee;
        }

        .badge-status {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
        }

        .status-pendiente { background: #fff3cd; color: #856404; }
        .status-pagado { background: #d4edda; color: #155724; }
        .status-enviado { background: #cce5ff; color: #004085; }
        .status-cancelado { background: #f8d7da; color: #721c24; }

        .btn-action {
            padding: 5px 10px;
            margin: 2px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-edit { background: var(--warning-color); color: white; }
        .btn-delete { background: var(--danger-color); color: white; }
        .btn-view { background: var(--info-color); color: white; }

        .btn-action:hover {
            transform: scale(1.1);
        }

        .chart-container {
            padding: 20px;
            height: 400px;
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }

        .alert {
            border-radius: 10px;
            border: none;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.show {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
        }

        /* Estilos para la Calculadora */
        .calculator {
            max-width: 300px;
            margin: 0 auto;
        }

        .calculator-display {
            margin-bottom: 15px;
        }

        .calculator-display input {
            font-size: 1.5em;
            text-align: right;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
        }

        .btn-calc {
            width: 100%;
            height: 50px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 8px;
            margin: 2px;
        }

        .btn-calc:hover {
            transform: scale(1.05);
            transition: transform 0.2s;
        }

        /* Estilos para Videojuegos */
        .game-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .game-card:hover {
            transform: translateY(-5px);
        }

        .game-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3em;
        }

        .game-info {
            padding: 15px;
        }

        .game-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .game-description {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .game-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.8em;
            color: #888;
        }

        .score-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary-color);
        }

        .score-player {
            font-weight: bold;
            color: var(--primary-color);
        }

        .score-value {
            font-size: 1.2em;
            color: var(--success-color);
        }

        .game-canvas {
            border: 2px solid #dee2e6;
            border-radius: 10px;
            background: #000;
        }

        .game-controls {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .game-controls h6 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .control-key {
            display: inline-block;
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            margin: 2px;
            font-family: monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header" id="sidebarHeader">
            <h4><i class="bi bi-cup-hot"></i> Admin Panel</h4>
        </div>
        <nav class="nav-menu">
            <div class="nav-item">
                <a href="#dashboard" class="nav-link active" data-section="dashboard">
                    <i class="bi bi-speedometer2"></i>
                    <span>Dashboard</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#categorias" class="nav-link" data-section="categorias">
                    <i class="bi bi-tags"></i>
                    <span>Categor√≠as</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#productos" class="nav-link" data-section="productos">
                    <i class="bi bi-box"></i>
                    <span>Productos</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#usuarios" class="nav-link" data-section="usuarios">
                    <i class="bi bi-people"></i>
                    <span>Usuarios</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#pedidos" class="nav-link" data-section="pedidos">
                    <i class="bi bi-cart"></i>
                    <span>Pedidos</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#reportes" class="nav-link" data-section="reportes">
                    <i class="bi bi-graph-up"></i>
                    <span>Reportes</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#calculadora" class="nav-link" data-section="calculadora">
                    <i class="bi bi-calculator"></i>
                    <span>Calculadora</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#videojuegos" class="nav-link" data-section="videojuegos">
                    <i class="bi bi-controller"></i>
                    <span>Videojuegos</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#configuracion" class="nav-link" data-section="configuracion">
                    <i class="bi bi-gear"></i>
                    <span>Configuraci√≥n</span>
                </a>
            </div>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Top Bar -->
        <div class="top-bar">
            <button class="toggle-sidebar" id="toggleSidebar">
                <i class="bi bi-list"></i>
            </button>
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">A</div>
                <div>
                    <div id="userName">Administrador</div>
                    <small id="userRole">Admin</small>
                </div>
                <button class="btn btn-outline-danger btn-sm" onclick="logout()">
                    <i class="bi bi-box-arrow-right"></i> Salir
                </button>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard" class="content-section">
            <div class="section-header">
                <h5><i class="bi bi-speedometer2"></i> Dashboard</h5>
            </div>
            <div class="p-4">
                <!-- Stats Cards -->
                <div class="dashboard-stats">
                    <div class="stat-card position-relative">
                        <div class="stat-icon"><i class="bi bi-people"></i></div>
                        <h3 id="totalUsers">0</h3>
                        <p>Usuarios Registrados</p>
                    </div>
                    <div class="stat-card position-relative">
                        <div class="stat-icon"><i class="bi bi-box"></i></div>
                        <h3 id="totalProducts">0</h3>
                        <p>Productos</p>
                    </div>
                    <div class="stat-card position-relative">
                        <div class="stat-icon"><i class="bi bi-cart"></i></div>
                        <h3 id="totalOrders">0</h3>
                        <p>Pedidos</p>
                    </div>
                    <div class="stat-card position-relative">
                        <div class="stat-icon"><i class="bi bi-currency-dollar"></i></div>
                        <h3 id="totalRevenue">$0</h3>
                        <p>Ingresos Totales</p>
                    </div>
                </div>

                <!-- Charts -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-graph-up"></i> Ventas Mensuales</h5>
                            </div>
                            <div class="chart-container">
                                <canvas id="salesChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-pie-chart"></i> Productos por Categor√≠a</h5>
                            </div>
                            <div class="chart-container">
                                <canvas id="categoryChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top Selling Products -->
                <div class="content-section">
                    <div class="section-header">
                        <h5><i class="bi bi-star"></i> Productos M√°s Vendidos</h5>
                    </div>
                    <div class="table-responsive">
                        <table class="table" id="topProductsTable">
                            <thead>
                                <tr>
                                    <th>Posici√≥n</th>
                                    <th>Producto</th>
                                    <th>Imagen</th>
                                    <th>Unidades Vendidas</th>
                                    <th>Ingresos Generados</th>
                                    <th>Stock Actual</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Recent Orders -->
                <div class="content-section">
                    <div class="section-header">
                        <h5><i class="bi bi-clock-history"></i> Pedidos Recientes</h5>
                    </div>
                    <div class="table-responsive">
                        <table class="table" id="recentOrdersTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Cliente</th>
                                    <th>Fecha</th>
                                    <th>Total</th>
                                    <th>Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Categor√≠as Section -->
        <div id="categorias" class="content-section" style="display: none;">
            <div class="section-header">
                <h5><i class="bi bi-tags"></i> Gesti√≥n de Categor√≠as</h5>
                <div>
                    <button class="btn btn-warning btn-sm me-2" onclick="testCategorySystem()" title="Prueba del sistema">
                        <i class="bi bi-bug"></i> Probar
                    </button>
                    <button class="btn-add" onclick="openCategoryModal()">
                        <i class="bi bi-plus"></i> Nueva Categor√≠a
                    </button>
                </div>
            </div>
            <div class="p-3">
                <!-- Filtros para Categor√≠as -->
                <div class="row mb-3">
                    <div class="col-md-4">
                        <input type="text" class="form-control" id="filterCategorias" placeholder="Buscar categor√≠as..." onkeyup="debouncedFilterCategories()">
                    </div>
                    <div class="col-md-3">
                        <select class="form-select" id="sortCategorias" onchange="sortCategories()">
                            <option value="">Ordenar por...</option>
                            <option value="name">Nombre A-Z</option>
                            <option value="name-desc">Nombre Z-A</option>
                            <option value="products">M√°s productos</option>
                            <option value="products-desc">Menos productos</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <button class="btn btn-outline-secondary" onclick="clearCategoryFilters()">
                            <i class="bi bi-x-lg"></i> Limpiar Filtros
                        </button>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-outline-primary" onclick="exportCategories()">
                            <i class="bi bi-download"></i> Exportar
                        </button>
                    </div>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table" id="categoriesTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Descripci√≥n</th>
                            <th>Productos</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Productos Section -->
        <div id="productos" class="content-section" style="display: none;">
            <div class="section-header">
                <h5><i class="bi bi-box"></i> Gesti√≥n de Productos</h5>
                <div>
                    <button class="btn btn-warning btn-sm me-2" onclick="testProductSystem()" title="Prueba del sistema">
                        <i class="bi bi-bug"></i> Probar
                    </button>
                    <button class="btn-add" onclick="openProductModal()">
                        <i class="bi bi-plus"></i> Nuevo Producto
                    </button>
                </div>
            </div>
            <div class="p-3">
                <!-- Filtros para Productos -->
                <div class="row mb-3">
                    <div class="col-md-3">
                        <input type="text" class="form-control" id="searchProductosAdmin" placeholder="Buscar productos..." onkeyup="debouncedFilterProducts()">
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="filterCategory" onchange="filterProducts()">
                            <option value="">Todas las categor√≠as</option>
                            <option value="Caf√©">Caf√©</option>
                            <option value="Bebidas">Bebidas</option>
                            <option value="Postres">Postres</option>
                            <option value="Snacks">Snacks</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="filterPrice" onchange="filterProducts()">
                            <option value="">Todos los precios</option>
                            <option value="0-5">$0 - $5</option>
                            <option value="5-10">$5 - $10</option>
                            <option value="10-20">$10 - $20</option>
                            <option value="20+">$20+</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="filterStock" onchange="filterProducts()">
                            <option value="">Todo el stock</option>
                            <option value="in-stock">En stock</option>
                            <option value="low-stock">Stock bajo</option>
                            <option value="out-stock">Sin stock</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="sortProducts" onchange="sortProducts()">
                            <option value="">Ordenar por...</option>
                            <option value="name">Nombre A-Z</option>
                            <option value="name-desc">Nombre Z-A</option>
                            <option value="price">Precio menor</option>
                            <option value="price-desc">Precio mayor</option>
                            <option value="stock">Stock menor</option>
                            <option value="stock-desc">Stock mayor</option>
                        </select>
                    </div>
                    <div class="col-md-1">
                        <button class="btn btn-outline-secondary" onclick="clearProductFilters()">
                            <i class="bi bi-x-lg"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table" id="productsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Imagen</th>
                            <th>Nombre</th>
                            <th>Categor√≠a</th>
                            <th>Precio</th>
                            <th>Stock</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Usuarios Section -->
        <div id="usuarios" class="content-section" style="display: none;">
            <div class="section-header">
                <h5><i class="bi bi-people"></i> Gesti√≥n de Usuarios</h5>
                <button class="btn-add" onclick="openUserModal()">
                    <i class="bi bi-plus"></i> Nuevo Usuario
                </button>
            </div>
            <div class="p-3">
                <!-- Filtros para Usuarios -->
                <div class="row mb-3">
                    <div class="col-md-3">
                        <input type="text" class="form-control" id="filterUsers" placeholder="Buscar usuarios..." onkeyup="filterUsers()">
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="filterRole" onchange="filterUsers()">
                            <option value="">Todos los roles</option>
                            <option value="admin">Administrador</option>
                            <option value="user">Usuario</option>
                            <option value="staff">Personal</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="filterStatus" onchange="filterUsers()">
                            <option value="">Todos los estados</option>
                            <option value="active">Activo</option>
                            <option value="inactive">Inactivo</option>
                            <option value="pending">Pendiente</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="sortUsers" onchange="sortUsers()">
                            <option value="">Ordenar por...</option>
                            <option value="name">Nombre A-Z</option>
                            <option value="name-desc">Nombre Z-A</option>
                            <option value="email">Email A-Z</option>
                            <option value="date">Fecha registro</option>
                            <option value="date-desc">Fecha registro (nuevo)</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-outline-secondary" onclick="clearUserFilters()">
                            <i class="bi bi-x-lg"></i> Limpiar
                        </button>
                    </div>
                    <div class="col-md-1">
                        <button class="btn btn-outline-primary" onclick="exportUsers()">
                            <i class="bi bi-download"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table" id="usersTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Avatar</th>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Rol</th>
                            <th>Estado</th>
                            <th>Fecha Registro</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pedidos Section -->
        <div id="pedidos" class="content-section" style="display: none;">
            <div class="section-header">
                <h5><i class="bi bi-cart"></i> Gesti√≥n de Pedidos</h5>
            </div>
            <div class="p-3">
                <!-- Filtros para Pedidos -->
                <div class="row mb-3">
                    <div class="col-md-2">
                        <input type="text" class="form-control" id="filterOrders" placeholder="Buscar pedidos..." onkeyup="filterOrders()">
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="filterOrderStatus" onchange="filterOrders()">
                            <option value="">Todos los estados</option>
                            <option value="pendiente">Pendiente</option>
                            <option value="pagado">Pagado</option>
                            <option value="enviado">Enviado</option>
                            <option value="cancelado">Cancelado</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <input type="date" class="form-control" id="filterOrderDate" onchange="filterOrders()" placeholder="Fecha">
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="filterOrderTotal" onchange="filterOrders()">
                            <option value="">Todos los montos</option>
                            <option value="0-20">$0 - $20</option>
                            <option value="20-50">$20 - $50</option>
                            <option value="50-100">$50 - $100</option>
                            <option value="100+">$100+</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" id="sortOrders" onchange="sortOrders()">
                            <option value="">Ordenar por...</option>
                            <option value="date">Fecha (antiguo)</option>
                            <option value="date-desc">Fecha (reciente)</option>
                            <option value="total">Total menor</option>
                            <option value="total-desc">Total mayor</option>
                            <option value="customer">Cliente A-Z</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-outline-secondary" onclick="clearOrderFilters()">
                            <i class="bi bi-x-lg"></i> Limpiar
                        </button>
                    </div>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table" id="ordersTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Cliente</th>
                            <th>Fecha</th>
                            <th>Productos</th>
                            <th>Total</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Reportes Section -->
        <div id="reportes" class="content-section" style="display: none;">
            <div class="section-header">
                <h5><i class="bi bi-graph-up"></i> Reportes y Estad√≠sticas</h5>
                <div class="d-flex gap-2">
                    <button class="btn btn-info btn-sm" onclick="simpleTestReports()" title="Prueba simple">
                        <i class="bi bi-play"></i> Prueba Simple
                    </button>
                    <button class="btn btn-warning btn-sm" onclick="testReportsSystem()" title="Prueba del sistema">
                        <i class="bi bi-bug"></i> Probar
                    </button>
                    <button class="btn btn-outline-light" onclick="refreshAllCharts()">
                        <i class="bi bi-arrow-clockwise"></i> Actualizar
                    </button>
                    <button class="btn btn-outline-light" onclick="exportAllReports()">
                        <i class="bi bi-download"></i> Exportar
                    </button>
                </div>
            </div>
            <div class="p-4">
                <!-- Filtros de Reportes -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <label class="form-label">Per√≠odo de An√°lisis</label>
                        <select class="form-select" id="reportPeriod" onchange="updateReports()">
                            <option value="7">√öltimos 7 d√≠as</option>
                            <option value="30" selected>√öltimos 30 d√≠as</option>
                            <option value="90">√öltimos 3 meses</option>
                            <option value="365">√öltimo a√±o</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Tipo de Gr√°fico</label>
                        <select class="form-select" id="chartType" onchange="updateChartType()">
                            <option value="line">L√≠nea</option>
                            <option value="bar">Barras</option>
                            <option value="doughnut">Dona</option>
                            <option value="pie">Circular</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Categor√≠a</label>
                        <select class="form-select" id="reportCategory" onchange="updateReports()">
                            <option value="all">Todas las categor√≠as</option>
                            <option value="sales">Ventas</option>
                            <option value="products">Productos</option>
                            <option value="users">Usuarios</option>
                            <option value="orders">Pedidos</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Acciones</label>
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-primary" onclick="showDetailedStats('sales')">
                                <i class="bi bi-info-circle"></i> Detalles
                            </button>
                            <button class="btn btn-outline-success" onclick="exportChart('sales')">
                                <i class="bi bi-image"></i> Imagen
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Gr√°ficos Principales -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-graph-up"></i> Ventas por Per√≠odo</h5>
                                <div class="d-flex gap-1">
                                    <button class="btn btn-sm btn-outline-light" onclick="exportChart('periodSales')">
                                        <i class="bi bi-download"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-light" onclick="showDetailedStats('periodSales')">
                                        <i class="bi bi-info-circle"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="periodSalesChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-bar-chart"></i> Productos M√°s Vendidos</h5>
                                <div class="d-flex gap-1">
                                    <button class="btn btn-sm btn-outline-light" onclick="exportChart('topProducts')">
                                        <i class="bi bi-download"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-light" onclick="showDetailedStats('topProducts')">
                                        <i class="bi bi-info-circle"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="topProductsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gr√°ficos Secundarios -->
                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-pie-chart"></i> Distribuci√≥n por Categor√≠a</h5>
                                <div class="d-flex gap-1">
                                    <button class="btn btn-sm btn-outline-light" onclick="exportChart('category')">
                                        <i class="bi bi-download"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-light" onclick="showDetailedStats('category')">
                                        <i class="bi bi-info-circle"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="categoryChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-people"></i> Usuarios por Rol</h5>
                                <div class="d-flex gap-1">
                                    <button class="btn btn-sm btn-outline-light" onclick="exportChart('users')">
                                        <i class="bi bi-download"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-light" onclick="showDetailedStats('users')">
                                        <i class="bi bi-info-circle"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="usersChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-cart"></i> Estado de Pedidos</h5>
                                <div class="d-flex gap-1">
                                    <button class="btn btn-sm btn-outline-light" onclick="exportChart('orders')">
                                        <i class="bi bi-download"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-light" onclick="showDetailedStats('orders')">
                                        <i class="bi bi-info-circle"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="ordersChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gr√°ficos de Tendencias -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-trending-up"></i> Tendencias de Ventas</h5>
                                <div class="d-flex gap-1">
                                    <button class="btn btn-sm btn-outline-light" onclick="exportChart('trends')">
                                        <i class="bi bi-download"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-light" onclick="showDetailedStats('trends')">
                                        <i class="bi bi-info-circle"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="salesTrendsChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-clock-history"></i> Actividad por Hora</h5>
                                <div class="d-flex gap-1">
                                    <button class="btn btn-sm btn-outline-light" onclick="exportChart('activity')">
                                        <i class="bi bi-download"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-light" onclick="showDetailedStats('activity')">
                                        <i class="bi bi-info-circle"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="activityChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- M√©tricas y KPIs -->
                <div class="row">
                    <div class="col-12">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-speedometer2"></i> M√©tricas Clave (KPIs)</h5>
                            </div>
                            <div class="p-4">
                                <div class="row" id="kpiMetrics">
                                    <!-- Los KPIs se cargar√°n din√°micamente -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calculadora Section -->
        <div id="calculadora" class="content-section" style="display: none;">
            <div class="section-header">
                <h5><i class="bi bi-calculator"></i> Calculadora Avanzada</h5>
            </div>
            <div class="p-4">
                <div class="row">
                    <div class="col-md-6">
                        <div class="content-section">
                            <div class="section-header">
                                <h5>Calculadora B√°sica</h5>
                            </div>
                            <div class="p-4">
                                <div class="calculator">
                                    <div class="calculator-display">
                                        <input type="text" id="calculatorDisplay" class="form-control" readonly>
                                    </div>
                                    <div class="calculator-buttons">
                                        <div class="row mb-2">
                                            <div class="col-3"><button class="btn btn-secondary btn-calc" onclick="clearCalculator()">C</button></div>
                                            <div class="col-3"><button class="btn btn-secondary btn-calc" onclick="deleteLastChar()">‚å´</button></div>
                                            <div class="col-3"><button class="btn btn-warning btn-calc" onclick="appendToCalculator('%')">%</button></div>
                                            <div class="col-3"><button class="btn btn-warning btn-calc" onclick="appendToCalculator('/')">√∑</button></div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('7')">7</button></div>
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('8')">8</button></div>
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('9')">9</button></div>
                                            <div class="col-3"><button class="btn btn-warning btn-calc" onclick="appendToCalculator('*')">√ó</button></div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('4')">4</button></div>
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('5')">5</button></div>
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('6')">6</button></div>
                                            <div class="col-3"><button class="btn btn-warning btn-calc" onclick="appendToCalculator('-')">-</button></div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('1')">1</button></div>
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('2')">2</button></div>
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('3')">3</button></div>
                                            <div class="col-3"><button class="btn btn-warning btn-calc" onclick="appendToCalculator('+')">+</button></div>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('0')">0</button></div>
                                            <div class="col-3"><button class="btn btn-light btn-calc" onclick="appendToCalculator('.')">.</button></div>
                                            <div class="col-6"><button class="btn btn-success btn-calc" onclick="calculateResult()">=</button></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="content-section">
                            <div class="section-header">
                                <h5>Calculadora de Negocios</h5>
                            </div>
                            <div class="p-4">
                                <div class="mb-3">
                                    <label class="form-label">Calculadora de Precios</label>
                                    <div class="input-group mb-2">
                                        <span class="input-group-text">Costo</span>
                                        <input type="number" class="form-control" id="costoProducto" placeholder="0.00" step="0.01">
                                        <span class="input-group-text">$</span>
                                    </div>
                                    <div class="input-group mb-2">
                                        <span class="input-group-text">Margen %</span>
                                        <input type="number" class="form-control" id="margenProducto" placeholder="30" value="30">
                                        <span class="input-group-text">%</span>
                                    </div>
                                    <button class="btn btn-primary" onclick="calcularPrecioVenta()">Calcular Precio de Venta</button>
                                    <div class="mt-2">
                                        <strong>Precio de Venta: <span id="precioVenta" class="text-success">$0.00</span></strong>
                                    </div>
                                </div>
                                <hr>
                                <div class="mb-3">
                                    <label class="form-label">Calculadora de Descuentos</label>
                                    <div class="input-group mb-2">
                                        <span class="input-group-text">Precio Original</span>
                                        <input type="number" class="form-control" id="precioOriginal" placeholder="0.00" step="0.01">
                                        <span class="input-group-text">$</span>
                                    </div>
                                    <div class="input-group mb-2">
                                        <span class="input-group-text">Descuento %</span>
                                        <input type="number" class="form-control" id="descuentoPorcentaje" placeholder="10" value="10">
                                        <span class="input-group-text">%</span>
                                    </div>
                                    <button class="btn btn-info" onclick="calcularDescuento()">Calcular Descuento</button>
                                    <div class="mt-2">
                                        <strong>Precio Final: <span id="precioFinal" class="text-info">$0.00</span></strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Videojuegos Section -->
        <div id="videojuegos" class="content-section" style="display: none;">
            <div class="section-header">
                <h5><i class="bi bi-controller"></i> Zona de Videojuegos</h5>
            </div>
            <div class="p-4">
                <div class="row justify-content-center">
                    <div class="col-md-3 mb-4">
                        <div class="card h-100 text-center shadow-sm">
                            <div class="card-body">
                                <i class="bi bi-arrow-up-circle" style="font-size: 3rem; color: #28a745;"></i>
                                <h5 class="card-title mt-3">Snake</h5>
                                <p class="card-text">El cl√°sico juego de la serpiente. Come y crece sin chocar.</p>
                                <a href="test_games.html" target="_blank" class="btn btn-success w-100 mt-2">
                                    <i class="bi bi-play-fill"></i> Jugar
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card h-100 text-center shadow-sm">
                            <div class="card-body">
                                <i class="bi bi-grid-3x3-gap" style="font-size: 3rem; color: #007bff;"></i>
                                <h5 class="card-title mt-3">Tetris</h5>
                                <p class="card-text">Organiza las piezas para completar l√≠neas y ganar puntos.</p>
                                <a href="test_games.html" target="_blank" class="btn btn-primary w-100 mt-2">
                                    <i class="bi bi-play-fill"></i> Jugar
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card h-100 text-center shadow-sm">
                            <div class="card-body">
                                <i class="bi bi-circle" style="font-size: 3rem; color: #dc3545;"></i>
                                <h5 class="card-title mt-3">Pong</h5>
                                <p class="card-text">Controla la paleta y no dejes pasar la pelota.</p>
                                <button onclick="openGameModal('pong')" class="btn btn-danger w-100 mt-2">
                                    <i class="bi bi-play-fill"></i> Jugar
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card h-100 text-center shadow-sm">
                            <div class="card-body">
                                <i class="bi bi-square" style="font-size: 3rem; color: #6f42c1;"></i>
                                <h5 class="card-title mt-3">Breakout</h5>
                                <p class="card-text">Rompe todos los bloques con la pelota sin dejarla caer.</p>
                                <button onclick="openGameModal('breakout')" class="btn btn-secondary w-100 mt-2">
                                    <i class="bi bi-play-fill"></i> Jugar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Gr√°ficas de videojuegos -->
                <div class="row mt-5">
                    <div class="col-md-6 mb-4">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-bar-chart"></i> Juegos m√°s jugados</h5>
                            </div>
                            <div class="p-3">
                                <canvas id="chartJuegosMasJugados" height="250"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <div class="content-section">
                            <div class="section-header">
                                <h5><i class="bi bi-people"></i> Juegos favoritos por cliente</h5>
                            </div>
                            <div class="p-3">
                                <canvas id="chartJuegosPorCliente" height="250"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Configuraci√≥n Section -->
        <div id="configuracion" class="content-section" style="display: none;">
            <div class="section-header">
                <h5><i class="bi bi-gear"></i> Configuraci√≥n del Sistema</h5>
            </div>
            <div class="p-4">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h6>Respaldo de Datos</h6>
                            </div>
                            <div class="card-body">
                                <button class="btn btn-primary" onclick="exportData()">
                                    <i class="bi bi-download"></i> Exportar Datos
                                </button>
                                <button class="btn btn-success" onclick="importData()">
                                    <i class="bi bi-upload"></i> Importar Datos
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h6>Limpieza de Datos</h6>
                            </div>
                            <div class="card-body">
                                <button class="btn btn-warning" onclick="clearAllData()">
                                    <i class="bi bi-trash"></i> Limpiar Todo
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals will be added here -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="Main_administrador.js"></script>
    <script src="games.js"></script>
</body>
</html>